<?xml version="1.0" encoding="utf-8" ?>
<tool id="qualimap_bamqc" name="QualiMap BamQC" version="2.2">
    <description>Tool to to facilitate the quality control of alignment sequencing data and its derivatives like feature counts.</description>
    <requirements>
        <requirement type="package" version="2.2">qualimap</requirement>
    </requirements>
    <stdio>
        <exit_code range=":-1" />
        <exit_code range="1:" />
    </stdio>
    <command interpreter="python">
        qualimap_bamqc.py
            --input_file $input_realigned_bam_file
            --out_dir qualimap_results
            --out_genome_file $genome_coverage
            --java_mem_size $mem_size
    </command>
    <inputs>
        <param name="input_realigned_bam_file" type="data" format="bam" label="Realigned BAM dataset" help="Specify realigned BAM dataset"/>
        <param name="mem_size" type="text" value="8G" format="txt" label="Java memory size (default Gig)" help="Specify the size of memory to allocate. (Default 8 Gig)"/>
    </inputs>
    <outputs>
        <data format="txt" name="genome_coverage" label="Qualimap BamQC coverage report">
          <discover_datasets pattern="genome_coverage*" visible="true" ext="txt" assign_primary_output="true"/>
        </data>
        <data format="txt" name="genome_results" label="Qualimap BamQC results">
          <discover_datasets pattern="genome_results*" visible="true" ext="txt" directory="qualimap_results" assign_primary_output="true"/>
        </data>
        <data format="html" name="qualimap_html_results" label="Qualimap BamQC HTML report">
          <discover_datasets pattern="qualimapReport*" visible="true" ext="html" directory="qualimap_results" assign_primary_output="true"/>
        </data>
    </outputs>
   
    <tests>
        <test>
          <param name="input_realigned_bam_file" value="test.bam"></param>
           <output name="genome_coverage">
            <assert_contents>
              <has_text text="" />
            </assert_contents>
          </output>
          <output name="genome_results">
          	<assert_contents>
              <has_text text="" />
            </assert_contents>
          </output>
          <output name="qualimap_html_results">
          	<assert_contents>
              <has_text text="" />
            </assert_contents>
          </output>
        </test>
    </tests>
    <help>
        https://github.com/scottx611x/qualimap2
    </help>
    <citations>
    </citations>
</tool>
